@{
    Layout = null;
}
@model PersonalInformation

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="~/Content/Custom/HomeForm.css" rel="stylesheet" />
    <script src="~/Content/Custom/Custom.js"></script>
    <title>Dashboard</title>
</head>
<body>
    <h1>Personal Information</h1>
    <!-- Contact Details Section -->
    <div class="mainformDiv">
        <fieldset>
            <legend>Personal Info</legend>
            <form action="#" method="post">

                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" name="firstName" value="@Model.FirstName" required>

                <label for="middleName">Middle Name:</label>
                <input type="text" id="middleName" name="middleName" value="@Model.MiddleName">

                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName" value="@Model.LastName" required><br><br>

                <label for="fatherFirstName">Father's First Name:</label>
                <input type="text" id="fatherFirstName" name="fatherFirstName" value="@Model.FatherFirstName" required><br><br>

                <label for="fatherMiddleName">Father's Middle Name:</label>
                <input type="text" id="fatherMiddleName" name="fatherMiddleName" value="@Model.FatherMiddleName"><br><br>

                <label for="fatherLastName">Father's Last Name:</label>
                <input type="text" id="fatherLastName" name="fatherLastName" value="@Model.FatherLastName" required><br><br>

                <label for="cnic">CNIC:</label>
                <input type="text" id="cnic" name="cnic" pattern="[0-9]{5}-[0-9]{7}-[0-9]{1}" placeholder="12345-1234567-1" value="@Model.CellPhoneNumber" maxlength="13" value="@Model.CNIC" disabled><br><br>

                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" value="@Model.EmailAddress" disabled><br><br>

                <label for="altEmail">Alternate Email Address:</label>
                <input type="email" id="altEmail" name="altEmail" value="@Model.AlterEmailAddress"><br><br>

                <label>Gender:</label>
                <select id="city">
                    <option>Select Gender</option>
                    <option value="M">Male</option>
                    <option value="F">Female</option>
                    <option value="T">Prefer not to self-identify</option>
                </select><br><br>

                <label for="husbandName">Husband's Name:</label>
                <input type="text" id="husbandName" name="husbandName"><br><br>

                <label for="dob">Date of Birth:</label>
                <select id="dobDay" name="dobDay">
                    <option>Day</option>
                    <option value="01">01</option>
                    <option value="02">02</option>
                    <option value="03">03</option>
                    <option value="04">04</option>
                    <option value="05">05</option>
                    <option value="06">06</option>
                    <option value="07">07</option>
                    <option value="08">08</option>
                    <option value="09">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>

                <select id="dobMonth" name="dobMonth">
                    <option>Select Month</option>
                    <option value="01">January</option>
                    <option value="02">February</option>
                    <option value="03">March</option>
                    <option value="04">April</option>
                    <option value="05">May</option>
                    <option value="06">June</option>
                    <option value="07">July</option>
                    <option value="08">Augest</option>
                    <option value="09">September</option>
                    <option value="10">Octuber</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select>

                <select id="dobYear" name="dobYear">
                    <!-- Add options for years as needed -->
                    <option>Select Year</option>
                </select>
                <br><br>

                <input type="button" id="editPersonalInfo" value="Submit">
            </form>
        </fieldset>

        <!-- Personal Information Section -->
        <fieldset>
            <legend>Contact Details</legend>
            <form action="#" method="post">
                <label for="cellPhone">Cell Phone Number:</label>
                <input type="tel" id="cellPhone" name="cellPhone" pattern="[0-9]{10}" placeholder="1234567890" maxlength="12" value="@Model.CellPhoneNumber" required><br><br>

                <label for="altCellPhone">Alternate Cell Phone Number:</label>
                <input type="tel" id="altCellPhone" name="altCellPhone" pattern="[0-9]{10}" maxlength="12" placeholder="1234567890"><br><br>

                <label for="homePhone">Home Phone Number:</label>
                <input type="tel" id="homePhone" name="homePhone" pattern="[0-9]{10}" placeholder="1234567890"><br><br>

                <label for="altLandline">Alternate Landline Number:</label>
                <input type="tel" id="altLandline" name="altLandline" pattern="[0-9]{10}" placeholder="1234567890"><br><br>

                <label for="whatsappNumber">WhatsApp Number:</label>
                <input type="tel" id="whatsappNumber" name="whatsappNumber" pattern="[0-9]{10}" placeholder="1234567890"><br><br>

                <label for="guardianCellPhone">Guardian Cell Phone Number:</label>
                <input type="tel" id="guardianCellPhone" name="guardianCellPhone" pattern="[0-9]{10}" placeholder="1234567890"><br><br>

                <label for="guardianEmail">Guardian Email Address:</label>
                <input type="email" id="guardianEmail" name="guardianEmail"><br><br>

                <input type="submit" value="Submit">
            </form>

        </fieldset>

        <!-- Address Information Section -->
        <fieldset>
            <legend>Address Details</legend>
            <form action="#" method="post">
                <fieldset>
                    <legend>Residential Address</legend>
                    <label for="residentialAddress">Residential Address:</label>
                    <textarea id="residentialAddress" name="residentialAddress" rows="2" cols="100" required></textarea><br><br>
                    <label for="country">Select Country:</label>
                    <select id="country" onchange="updateProvince();">
                        <option>Select Country</option>
                        <option value="pakistan">Pakistan</option>
                    </select><br><br>

                    <label for="province">Select Province/State:</label>
                    <select id="province" onchange="updateCities();">
                        <option>Select Provience</option>
                    </select><br><br>

                    <label for="city">City:</label>
                    <select id="city">
                        <option>Select City</option>
                    </select><br><br>

                    <label for="residentialCityOther">Other City:</label>
                    <input type="text" id="residentialCityOther" name="residentialCityOther" style="display: none;"><br><br>

                    <label for="residentialPostalCode">Residential Postal Code:</label>
                    <input type="text" id="residentialPostalCode" name="residentialPostalCode" required><br><br>

                    <label for="permanentDifferent">Check the box if your permanent residential address is different from your Residential address:</label>
                    <input type="checkbox" id="permanentDifferent" onclick="toggleFormSection('permanentForm', 'permanentDifferent');">

                    <div id="permanentForm" style="display: none;">
                        <fieldset>
                            <legend>Permanent Address</legend>
                            <label for="permanentAddress">Permanent Address:</label>
                            <textarea id="permanentAddress" name="permanentAddress" rows="4" cols="50" required></textarea><br><br>

                            <label for="country">Select Country:</label>
                            <select id="country" onchange="updateProvince();">
                                <option>Select Country</option>
                                <option value="pakistan">Pakistan</option>
                            </select><br><br>

                            <label for="province">Select Province/State:</label>
                            <select id="province" onchange="updateCities();">
                                <option>Select Provience</option>
                            </select><br><br>

                            <label for="city">City:</label>
                            <select id="city">
                                <option>Select City</option>
                            </select><br><br>

                            <label for="permanentPostalCode">Permanent Postal Code:</label>
                            <input type="text" id="permanentPostalCode" name="permanentPostalCode" required><br><br>
                        </fieldset>
                    </div>

                    <label for="postalDifferent">Check the box if your Postal Address is different from your Residential address:</label>
                    <input type="checkbox" id="postalDifferent" onclick="toggleFormSection('postalForm', 'postalDifferent');">

                    <div id="postalForm" style="display: none;">
                        <fieldset>
                            <legend>Postal Address</legend>
                            <label for="postalAddress">Postal Address:</label>
                            <textarea id="postalAddress" name="postalAddress" rows="4" cols="50" required></textarea><br><br>

                            <label for="country">Select Country:</label>
                            <select id="country" onchange="updateProvince();">
                                <option>Select Country</option>
                                <option value="pakistan">Pakistan</option>
                            </select><br><br>

                            <label for="province">Select Province/State:</label>
                            <select id="province" onchange="updateCities();">
                                <option>Select Provience</option>
                            </select><br><br>

                            <label for="city">City:</label>
                            <select id="city">
                                <option>Select City</option>
                            </select><br><br>

                            <label for="postalPostalCode">Postal Code:</label>
                            <input type="text" id="postalPostalCode" name="postalPostalCode" required><br><br>
                        </fieldset>
                    </div>

                </fieldset>

                <input type="submit" value="Submit">
            </form>

        </fieldset>

        <!-- Academic Details Section -->
        <fieldset>
            <legend>Academic Details </legend>
            <label for="fathername">Father's Name:</label>
            <input type="text" id="fathername" name="fathername" required><br>

            <label for="mothername">Mother's Name:</label>
            <input type="text" id="mothername" name="mothername" required><br>
        </fieldset>
    </div>




    <script>
        LoadYear();
        function toggleOtherCityInput() {
            var select = document.getElementById("residentialCity");
            var otherInput = document.getElementById("residentialCityOther");

            if (select.value === "other") {
                otherInput.style.display = "block";
            } else {
                otherInput.style.display = "none";
            }
        }


        function toggleFormSection(sectionId, checkboxId) {
            var section = document.getElementById(sectionId);
            var checkbox = document.getElementById(checkboxId);

            section.style.display = checkbox.checked ? "block" : "none";
        }

        function LoadYear() {
            var comboYear = document.getElementById("dobYear");
            for (var j = 2023; j > 1950; j--) {
                var option = document.createElement("option");
                option.value = j;
                option.text = j;
                comboYear.appendChild(option);
            }
        }

        function updateCities() {
            var provinceSelect = document.getElementById("province");
            var citySelect = document.getElementById("city");

            var selectedProvince = provinceSelect.value;


            var citiesByProvince = {
                "Punjab": ["Lahore", "Faisalabad", "Rawalpindi", "Multan", "Gujranwala"],
                "Sindh": ["Karachi", "Hyderabad", "Sukkur", "Larkana"],
                "Khyber Pakhtunkhwa": ["Peshawar", "Abbottabad", "Swat", "Mardan"],
                "Balochistan": ["Quetta", "Gwadar", "Khuzdar", "Turbat"],
                "Gilgit-Baltistan": ["Gilgit", "Skardu", "Hunza", "Ghizer"],
                "Azad Kashmir": ["Muzaffarabad", "Mirpur", "Kotli", "Rawalakot"]
                // ... and so on
            };

            // Update city select box options based on selected province
            citySelect.innerHTML = "";
            var cities = citiesByProvince[selectedProvince];
            for (var j = 0; j < cities.length; j++) {
                var option = document.createElement("option");
                option.value = cities[j];
                option.text = cities[j];
                citySelect.appendChild(option);
            }
        }

        function updateProvince() {
            var countrySelect = document.getElementById("country");
            var provinceSelect = document.getElementById("province");

            var selectedCountry = countrySelect.value;

            // Simulated data (you can replace this with actual data)
            var provincesByCountry = {
                "pakistan": ["Punjab", "Sindh", "Khyber Pakhtunkhwa", "Balochistan", "Gilgit-Baltistan", "Azad Kashmir"]
            };


            // Update province select box options based on selected country
            provinceSelect.innerHTML = "";
            var provinces = provincesByCountry[selectedCountry];
            for (var i = 0; i < provinces.length; i++) {
                var option = document.createElement("option");
                option.value = provinces[i];
                option.text = provinces[i];
                provinceSelect.appendChild(option);
            }

        }

        $('#editPersonalInfo').click(function (e) {
            e.preventDefault();

            var param = {
                id: $('#firstName').val(),
                name: $('#middleName').val(),
                username: $('#lastName').val(),
                msisdn: $('#fatherFirstName').val(),
                email: $('#fatherMiddleName').val(),
                record_type: $('#fatherLastName').val(),
                gender: $('#cnic').val(),
                residence_type: $('#email').val(),
                country_id: $('#altEmail').val()

            };

            CallAsyncService('/Employee/Update', JSON.stringify(param), editUserCallback);

            function editUserCallback(response) {
                $('#edit_modal').modal('hide');
                if (response.status) {
                    mainTable.ajax.reload();
                    ShowDivSuccess(response.message)
                }
                else {
                    ShowDivError(response.message)
                }
                setTimeout(function () { location.reload(); }, 3000);
            }

        });

    </script>
</body>
</html>